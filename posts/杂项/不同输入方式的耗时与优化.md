# 不同输入方式的时间与优化

## cin 标准输入流

`cin` 相对于 `scanf` 的效率会低一些，尤其是在读入数据的规模极大时，差距尤为明显，输入数据在 `1e6` 规模以上时，使用 `cin` 读入会超时

### cin 效率低的原因

默认的时候，cin与stdin总是保持同步的

> 同步就是iostream的缓冲跟stdio的同步。

也就是说这两种方法可以混用，而不必担心文件指针混乱，同时 `cout` 和 `stdout` 也一样，两者混用不会输出顺序错乱。正因为这个兼容性的特性，导致cin有许多额外的开销

### 对 `cin` 进行优化：

将以下代码加在 `main` 函数第一行，以取消 `cin` 与 `stdin` 的同步，从而达到加速的效果，优化后效率和 `scanf` 相差无几

```cpp
ios :: sync_with_stdio(false);
cin.tie(0);
```


### 附录：

<p align="center"><font face="苹方" size=5>各种输入方式对比表</font></p>

<div class="center">

| 方法/平台/时间(秒) | Linux gcc | Windows mingw | Windows VC2008
| :--------------: | :-------: | :-----------: | :----------: |
| scanf	| 2.010	| 3.704 | 3.425
|  cin  | 6.380	| 64.003 | 19.208
| cin取消同步 | 2.050 | 6.004 | 19.616
| fread | 0.290 | 0.241 | 0.304
| read | 0.290 | 0.398 | 不支持
| mmap | 0.250 | 不支持 | 不支持
| Pascal | read | 2.160 | 4.668	

</div>

<br>

#### 宝藏网站：

[探寻c++最快读入方式](https://byvoid.com/zhs/blog/fast-readfile/)


<!-- 让表格居中显示的风格 -->
<style>
.center  {
  width: auto;
  display: table;
  margin-left: auto;
  margin-right: auto;
}
</style>